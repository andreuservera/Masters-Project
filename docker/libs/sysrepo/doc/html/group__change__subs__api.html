<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sysrepo: Change Data Subscription API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sysrepo
   &#160;<span id="projectnumber">1.4.70</span>
   </div>
   <div id="projectbrief">YANG datastore</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__change__subs__api.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Change Data Subscription API</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga7b336602d0a83654c01600eb9bf8dd80"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__change__subs__api.html#gaf5289764c79d867bab642997c23b355a">sr_event_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#ga7b336602d0a83654c01600eb9bf8dd80">sr_event_t</a></td></tr>
<tr class="memdesc:ga7b336602d0a83654c01600eb9bf8dd80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of the event that has occurred (passed to application callbacks).  <a href="#ga7b336602d0a83654c01600eb9bf8dd80">More...</a><br /></td></tr>
<tr class="separator:ga7b336602d0a83654c01600eb9bf8dd80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga817cb8999bcd27d073edec55b7228a4f"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__change__subs__api.html#gaf5478f6a39eb800cb9599d5f413e2e39">sr_change_oper_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#ga817cb8999bcd27d073edec55b7228a4f">sr_change_oper_t</a></td></tr>
<tr class="memdesc:ga817cb8999bcd27d073edec55b7228a4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of the operation made on an item, used by changeset retrieval in <a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a>.  <a href="#ga817cb8999bcd27d073edec55b7228a4f">More...</a><br /></td></tr>
<tr class="separator:ga817cb8999bcd27d073edec55b7228a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8ddf64064f8bc497d1435668359a45a"><td class="memItemLeft" align="right" valign="top">typedef struct sr_change_iter_s&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a></td></tr>
<tr class="memdesc:gab8ddf64064f8bc497d1435668359a45a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterator used for retrieval of a changeset using <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call.  <a href="#gab8ddf64064f8bc497d1435668359a45a">More...</a><br /></td></tr>
<tr class="separator:gab8ddf64064f8bc497d1435668359a45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf0db09fa67680ded78f46a7518dca47c"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#gaf0db09fa67680ded78f46a7518dca47c">sr_module_change_cb</a>) (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *module_name, const char *xpath, <a class="el" href="group__change__subs__api.html#ga7b336602d0a83654c01600eb9bf8dd80">sr_event_t</a> event, uint32_t request_id, void *private_data)</td></tr>
<tr class="memdesc:gaf0db09fa67680ded78f46a7518dca47c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to be called on the event of changing datastore content of the specified module.  <a href="#gaf0db09fa67680ded78f46a7518dca47c">More...</a><br /></td></tr>
<tr class="separator:gaf0db09fa67680ded78f46a7518dca47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaf5289764c79d867bab642997c23b355a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#gaf5289764c79d867bab642997c23b355a">sr_event_e</a> { <br />
&#160;&#160;<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa2d97580f720e0fac84cf422d4ca8287d">SR_EV_UPDATE</a>, 
<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a>, 
<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a>, 
<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a>, 
<br />
&#160;&#160;<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa11b3249384640ee1795f861657a952fb">SR_EV_ENABLED</a>, 
<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa0b5a9a0b1dc3970993dba94054d65e40">SR_EV_RPC</a>
<br />
 }<tr class="memdesc:gaf5289764c79d867bab642997c23b355a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of the event that has occurred (passed to application callbacks).  <a href="group__change__subs__api.html#gaf5289764c79d867bab642997c23b355a">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gaf5289764c79d867bab642997c23b355a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5478f6a39eb800cb9599d5f413e2e39"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#gaf5478f6a39eb800cb9599d5f413e2e39">sr_change_oper_e</a> { <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39a438eb930f4ca04223c1e1e5ea6188de6">SR_OP_CREATED</a>, 
<a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39ad5d70b8f7c44d9e888b5ac252f954b5a">SR_OP_MODIFIED</a>, 
<a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39af4206240b7e15796a672caa00ef7b9ee">SR_OP_DELETED</a>, 
<a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39acae67fe0c948b028d3fe072551019962">SR_OP_MOVED</a>
 }<tr class="memdesc:gaf5478f6a39eb800cb9599d5f413e2e39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of the operation made on an item, used by changeset retrieval in <a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a>.  <a href="group__change__subs__api.html#gaf5478f6a39eb800cb9599d5f413e2e39">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gaf5478f6a39eb800cb9599d5f413e2e39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9fc19731882299fe1864ccc20b9bd842"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#ga9fc19731882299fe1864ccc20b9bd842">sr_module_change_subscribe</a> (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *module_name, const char *xpath, <a class="el" href="group__change__subs__api.html#gaf0db09fa67680ded78f46a7518dca47c">sr_module_change_cb</a> callback, void *private_data, uint32_t priority, <a class="el" href="group__subs__api.html#gaaa041e80af5ead759b0ba710e116d145">sr_subscr_options_t</a> opts, <a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> **subscription)</td></tr>
<tr class="memdesc:ga9fc19731882299fe1864ccc20b9bd842"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe for changes made in the specified module. If there are changes made in several modules, the module order is determined by the <b>order in the changes</b> (it is kept).  <a href="#ga9fc19731882299fe1864ccc20b9bd842">More...</a><br /></td></tr>
<tr class="separator:ga9fc19731882299fe1864ccc20b9bd842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga613064e7a7431a30eff2b99b87af5348"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348">sr_get_changes_iter</a> (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *xpath, <a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> **iter)</td></tr>
<tr class="memdesc:ga613064e7a7431a30eff2b99b87af5348"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in module-change callbacks. It <b>cannot</b> be used outside the callback.  <a href="#ga613064e7a7431a30eff2b99b87af5348">More...</a><br /></td></tr>
<tr class="separator:ga613064e7a7431a30eff2b99b87af5348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae33aac1b5498d67da0154788bacab8ca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#gae33aac1b5498d67da0154788bacab8ca">sr_dup_changes_iter</a> (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *xpath, <a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> **iter)</td></tr>
<tr class="memdesc:gae33aac1b5498d67da0154788bacab8ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in module-change callbacks. It <b>can</b> be used even outside the callback.  <a href="#gae33aac1b5498d67da0154788bacab8ca">More...</a><br /></td></tr>
<tr class="separator:gae33aac1b5498d67da0154788bacab8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga927f648013da7e15bc521d17b58fb707"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707">sr_get_change_next</a> (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, <a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> *iter, <a class="el" href="group__change__subs__api.html#ga817cb8999bcd27d073edec55b7228a4f">sr_change_oper_t</a> *operation, <a class="el" href="group__get__data__api.html#ga3622da231931a47e9ac400561fbe80e2">sr_val_t</a> **old_value, <a class="el" href="group__get__data__api.html#ga3622da231931a47e9ac400561fbe80e2">sr_val_t</a> **new_value)</td></tr>
<tr class="memdesc:ga927f648013da7e15bc521d17b58fb707"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the next change from the provided iterator created by <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call. Data are represented as <a class="el" href="group__get__data__api.html#ga3622da231931a47e9ac400561fbe80e2" title="Structure that contains value of an data element stored in the sysrepo datastore. ...">sr_val_t</a> structures.  <a href="#ga927f648013da7e15bc521d17b58fb707">More...</a><br /></td></tr>
<tr class="separator:ga927f648013da7e15bc521d17b58fb707"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa80d8ca05c67eba9d794b129422e8294"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#gaa80d8ca05c67eba9d794b129422e8294">sr_get_change_tree_next</a> (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, <a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> *iter, <a class="el" href="group__change__subs__api.html#ga817cb8999bcd27d073edec55b7228a4f">sr_change_oper_t</a> *operation, const struct lyd_node **node, const char **prev_value, const char **prev_list, bool *prev_dflt)</td></tr>
<tr class="memdesc:gaa80d8ca05c67eba9d794b129422e8294"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next change from the provided iterator created by <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call. Data are represented as <em>libyang</em> subtrees.  <a href="#gaa80d8ca05c67eba9d794b129422e8294">More...</a><br /></td></tr>
<tr class="separator:gaa80d8ca05c67eba9d794b129422e8294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf76435b403512f619089d4c951fd6627"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__change__subs__api.html#gaf76435b403512f619089d4c951fd6627">sr_free_change_iter</a> (<a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> *iter)</td></tr>
<tr class="memdesc:gaf76435b403512f619089d4c951fd6627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees <a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a" title="Iterator used for retrieval of a changeset using sr_get_changes_iter call. ">sr_change_iter_t</a> iterator and all memory allocated within it.  <a href="#gaf76435b403512f619089d4c951fd6627">More...</a><br /></td></tr>
<tr class="separator:gaf76435b403512f619089d4c951fd6627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga7b336602d0a83654c01600eb9bf8dd80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b336602d0a83654c01600eb9bf8dd80">&#9670;&nbsp;</a></span>sr_event_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__change__subs__api.html#gaf5289764c79d867bab642997c23b355a">sr_event_e</a>  <a class="el" href="group__change__subs__api.html#ga7b336602d0a83654c01600eb9bf8dd80">sr_event_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of the event that has occurred (passed to application callbacks). </p>
<dl class="section note"><dt>Note</dt><dd>Each change is normally announced twice: first as <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a> event and then as <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a> or <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a> event. If the subscriber does not support verification, it can subscribe only to <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a> event by providing <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a0530a7715e162ee90e298ce504239444" title="The subscriber does not support verification of the changes and wants to be notified only after the c...">SR_SUBSCR_DONE_ONLY</a> subscription flag. The general rule is that in case the operation fails, only if the subscriber has <b>successfully</b> processed the first event (<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a>/<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa0b5a9a0b1dc3970993dba94054d65e40">SR_EV_RPC</a>), it will get the second <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a> event. </dd></dl>

</div>
</div>
<a id="ga817cb8999bcd27d073edec55b7228a4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga817cb8999bcd27d073edec55b7228a4f">&#9670;&nbsp;</a></span>sr_change_oper_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__change__subs__api.html#gaf5478f6a39eb800cb9599d5f413e2e39">sr_change_oper_e</a>  <a class="el" href="group__change__subs__api.html#ga817cb8999bcd27d073edec55b7228a4f">sr_change_oper_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of the operation made on an item, used by changeset retrieval in <a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a>. </p>

</div>
</div>
<a id="gab8ddf64064f8bc497d1435668359a45a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab8ddf64064f8bc497d1435668359a45a">&#9670;&nbsp;</a></span>sr_change_iter_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct sr_change_iter_s <a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterator used for retrieval of a changeset using <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call. </p>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01303">1303</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<a id="gaf0db09fa67680ded78f46a7518dca47c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf0db09fa67680ded78f46a7518dca47c">&#9670;&nbsp;</a></span>sr_module_change_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* sr_module_change_cb) (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *module_name, const char *xpath, <a class="el" href="group__change__subs__api.html#ga7b336602d0a83654c01600eb9bf8dd80">sr_event_t</a> event, uint32_t request_id, void *private_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback to be called on the event of changing datastore content of the specified module. </p>
<dl class="section note"><dt>Note</dt><dd>Callback is allowed to modify installed YANG modules but MUST not modify subscriptions on <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a> event. It would result in a deadlock and this callback timeout (unless <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a1d21dad1b10035bffcd901668afda9a4" title="The subscriber wants to modify other subscriptions in its callback. Normally, this would cause deadlo...">SR_SUBSCR_UNLOCKED</a> is used when subscribing).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Implicit session (do not stop) with information about the changed data (retrieved by <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a>) the event originator session IDs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">module_name</td><td>Name of the module where the change has occurred. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xpath</td><td><a class="el" href="index.html#paths">XPath</a> used when subscribing, NULL if the whole module was subscribed to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>Type of the callback event that has occurred. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request_id</td><td>Request ID unique for the specific <code>module_name</code>. Connected events for one request (<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a> and <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a>, for example) have the same request ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">private_data</td><td>Private context opaque to sysrepo, as passed to <a class="el" href="group__change__subs__api.html#ga9fc19731882299fe1864ccc20b9bd842" title="Subscribe for changes made in the specified module. If there are changes made in several modules...">sr_module_change_subscribe</a> call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>User error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01321">1321</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaf5289764c79d867bab642997c23b355a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5289764c79d867bab642997c23b355a">&#9670;&nbsp;</a></span>sr_event_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__change__subs__api.html#gaf5289764c79d867bab642997c23b355a">sr_event_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of the event that has occurred (passed to application callbacks). </p>
<dl class="section note"><dt>Note</dt><dd>Each change is normally announced twice: first as <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a> event and then as <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a> or <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a> event. If the subscriber does not support verification, it can subscribe only to <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a> event by providing <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a0530a7715e162ee90e298ce504239444" title="The subscriber does not support verification of the changes and wants to be notified only after the c...">SR_SUBSCR_DONE_ONLY</a> subscription flag. The general rule is that in case the operation fails, only if the subscriber has <b>successfully</b> processed the first event (<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a>/<a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa0b5a9a0b1dc3970993dba94054d65e40">SR_EV_RPC</a>), it will get the second <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a> event. </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaf5289764c79d867bab642997c23b355aa2d97580f720e0fac84cf422d4ca8287d"></a>SR_EV_UPDATE&#160;</td><td class="fielddoc"><p>Occurs before any other events and the subscriber can update the apply-changes diff. It is performed by calling <code>sr_*_item()</code> or <a class="el" href="group__edit__data__api.html#ga6661900582c6948622efb54a15ef8fa7" title="Provide a prepared edit data tree to be applied. These changes are applied only after calling sr_appl...">sr_edit_batch()</a> on the callback session <b>without</b> calling <a class="el" href="group__edit__data__api.html#ga0f27ec174d5a2fec61f42fea9e2fe4b4" title="Apply changes made in the current session. In case the changes could not be applied successfully for ...">sr_apply_changes()</a> or any other function. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5"></a>SR_EV_CHANGE&#160;</td><td class="fielddoc"><p>Occurs just before the changes are committed to the datastore, the subscriber is supposed to verify that the changes are valid and can be applied and prepare all resources required for the changes. The subscriber can still deny the changes in this phase by returning an error from the callback. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39"></a>SR_EV_DONE&#160;</td><td class="fielddoc"><p>Occurs just after the changes have been successfully committed to the datastore, the subscriber can apply the changes now, but it cannot deny the changes in this phase anymore (any returned errors are just logged and ignored). </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f"></a>SR_EV_ABORT&#160;</td><td class="fielddoc"><p>Occurs in case that the commit transaction has failed because one of the verifiers has denied the change (returned an error). The subscriber is supposed to return the managed application to the state before the commit. Any returned errors are just logged and ignored. This event is also generated for RPC subscriptions when a later callback has failed and this one has already successfully processed <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa0b5a9a0b1dc3970993dba94054d65e40">SR_EV_RPC</a>. The callback that failed will <b>never</b> get this event! </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5289764c79d867bab642997c23b355aa11b3249384640ee1795f861657a952fb"></a>SR_EV_ENABLED&#160;</td><td class="fielddoc"><p>Occurs for subscriptions with the flag <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14ac5b782dfbbfe74c8ff2b1642a8bb0afe" title="The subscriber wants to be notified about the current configuration at the moment of subscribing...">SR_SUBSCR_ENABLED</a> and is normally followed by <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a>. It can fail and will also be triggered even when there is no startup configuration (which is different from the <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a> event). Also note that the callback on this event <b>cannot</b> return <a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39aa297b02a06472aa8df2e971b9b1c77fe">SR_ERR_CALLBACK_SHELVE</a>. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5289764c79d867bab642997c23b355aa0b5a9a0b1dc3970993dba94054d65e40"></a>SR_EV_RPC&#160;</td><td class="fielddoc"><p>Occurs for a standard RPC execution. If a later callback fails, <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a> is generated. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01266">1266</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<a id="gaf5478f6a39eb800cb9599d5f413e2e39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf5478f6a39eb800cb9599d5f413e2e39">&#9670;&nbsp;</a></span>sr_change_oper_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__change__subs__api.html#gaf5478f6a39eb800cb9599d5f413e2e39">sr_change_oper_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of the operation made on an item, used by changeset retrieval in <a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaf5478f6a39eb800cb9599d5f413e2e39a438eb930f4ca04223c1e1e5ea6188de6"></a>SR_OP_CREATED&#160;</td><td class="fielddoc"><p>The item has been created by the change. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5478f6a39eb800cb9599d5f413e2e39ad5d70b8f7c44d9e888b5ac252f954b5a"></a>SR_OP_MODIFIED&#160;</td><td class="fielddoc"><p>The value of the item has been modified by the change. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5478f6a39eb800cb9599d5f413e2e39af4206240b7e15796a672caa00ef7b9ee"></a>SR_OP_DELETED&#160;</td><td class="fielddoc"><p>The item has been deleted by the change. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf5478f6a39eb800cb9599d5f413e2e39acae67fe0c948b028d3fe072551019962"></a>SR_OP_MOVED&#160;</td><td class="fielddoc"><p>The item has been moved in the subtree by the change (applicable for leaf-lists and user-ordered lists). </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01293">1293</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9fc19731882299fe1864ccc20b9bd842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9fc19731882299fe1864ccc20b9bd842">&#9670;&nbsp;</a></span>sr_module_change_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_module_change_subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>xpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#gaf0db09fa67680ded78f46a7518dca47c">sr_module_change_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__subs__api.html#gaaa041e80af5ead759b0ba710e116d145">sr_subscr_options_t</a>&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> **&#160;</td>
          <td class="paramname"><em>subscription</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribe for changes made in the specified module. If there are changes made in several modules, the module order is determined by the <b>order in the changes</b> (it is kept). </p>
<p>Required WRITE access. If <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a1e876a752ef82b3a73fd2b62aabead6f" title="The subscriber is not the &quot;owner&quot; of the subscribed data tree, just a passive watcher for changes...">SR_SUBSCR_PASSIVE</a> is set, required READ access.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Session (<a class="el" href="group__conn__sess__api.html#gabc202a7ba344c0e2d4c8cb0738f8d026">DS</a>-specific) to use. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">module_name</td><td>Name of the module of interest for change notifications. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xpath</td><td>Optional <a class="el" href="index.html#paths">XPath</a> further filtering the changes that will be handled by this subscription. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>Callback to be called when the change in the datastore occurs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">private_data</td><td>Private context passed to the callback function, opaque to sysrepo. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">priority</td><td>Specifies the order in which the callbacks (<b>within module</b>) will be called. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opts</td><td>Options overriding default behavior of the subscription, it is supposed to be a bitwise OR-ed value of any <a class="el" href="group__subs__api.html#gae2a6ae984bc100ab79a9730c3bef3ca0" title="Flags used to override default handling of subscriptions. ">sr_subscr_flag_t</a> flags. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">subscription</td><td>Subscription context that is supposed to be released by <a class="el" href="group__subs__api.html#ga8fe49b0cf74d5744cae2aa47d13d480b" title="Unsubscribes from a subscription acquired by any of sr_*_subscribe calls and releases all subscriptio...">sr_unsubscribe</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>An existing context may be passed in case that <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a08c075b76b8299ea4b4ed0fbbcb5b9ae" title="This option enables the application to re-use an already existing subscription context previously ret...">SR_SUBSCR_CTX_REUSE</a> option is specified. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

</div>
</div>
<a id="ga613064e7a7431a30eff2b99b87af5348"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga613064e7a7431a30eff2b99b87af5348">&#9670;&nbsp;</a></span>sr_get_changes_iter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_get_changes_iter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>xpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> **&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in module-change callbacks. It <b>cannot</b> be used outside the callback. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a> for iterating over the changeset using this iterator.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Implicit session provided in the callbacks (<a class="el" href="group__change__subs__api.html#gaf0db09fa67680ded78f46a7518dca47c" title="Callback to be called on the event of changing datastore content of the specified module...">sr_module_change_cb</a>). Will not work with other sessions. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xpath</td><td><a class="el" href="index.html#paths">XPath</a> selecting the changes. Note that you must select all the changes specifically, not just subtrees (to get a full change subtree <code>//.</code> can be appended to the XPath)! Also note that if you use an XPath that selects more changes than subscribed to, you may actually get them because all the changes of a module are available in every callback! </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iter</td><td>Iterator context that can be used to retrieve individual changes using <a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a> calls. Allocated by the function, should be freed with <a class="el" href="group__change__subs__api.html#gaf76435b403512f619089d4c951fd6627" title="Frees sr_change_iter_t iterator and all memory allocated within it. ">sr_free_change_iter</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

</div>
</div>
<a id="gae33aac1b5498d67da0154788bacab8ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae33aac1b5498d67da0154788bacab8ca">&#9670;&nbsp;</a></span>sr_dup_changes_iter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_dup_changes_iter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>xpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> **&#160;</td>
          <td class="paramname"><em>iter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in module-change callbacks. It <b>can</b> be used even outside the callback. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a> for iterating over the changeset using this iterator.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Implicit session provided in the callbacks (<a class="el" href="group__change__subs__api.html#gaf0db09fa67680ded78f46a7518dca47c" title="Callback to be called on the event of changing datastore content of the specified module...">sr_module_change_cb</a>). Will not work with other sessions. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xpath</td><td><a class="el" href="index.html#paths">XPath</a> selecting the changes. Note that you must select all the changes specifically, not just subtrees (to get a full change subtree <code>//.</code> can be appended to the XPath)! Also note that if you use an XPath that selects more changes than subscribed to, you may actually get them because all the changes of a module are available in every callback! </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iter</td><td>Iterator context that can be used to retrieve individual changes using <a class="el" href="group__change__subs__api.html#ga927f648013da7e15bc521d17b58fb707" title="Return the next change from the provided iterator created by sr_get_changes_iter call. Data are represented as sr_val_t structures. ">sr_get_change_next</a> calls. Allocated by the function, should be freed with <a class="el" href="group__change__subs__api.html#gaf76435b403512f619089d4c951fd6627" title="Frees sr_change_iter_t iterator and all memory allocated within it. ">sr_free_change_iter</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

</div>
</div>
<a id="ga927f648013da7e15bc521d17b58fb707"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga927f648013da7e15bc521d17b58fb707">&#9670;&nbsp;</a></span>sr_get_change_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_get_change_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> *&#160;</td>
          <td class="paramname"><em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#ga817cb8999bcd27d073edec55b7228a4f">sr_change_oper_t</a> *&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__get__data__api.html#ga3622da231931a47e9ac400561fbe80e2">sr_val_t</a> **&#160;</td>
          <td class="paramname"><em>old_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__get__data__api.html#ga3622da231931a47e9ac400561fbe80e2">sr_val_t</a> **&#160;</td>
          <td class="paramname"><em>new_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the next change from the provided iterator created by <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call. Data are represented as <a class="el" href="group__get__data__api.html#ga3622da231931a47e9ac400561fbe80e2" title="Structure that contains value of an data element stored in the sysrepo datastore. ...">sr_val_t</a> structures. </p>
<dl class="section note"><dt>Note</dt><dd>If the operation is <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39acae67fe0c948b028d3fe072551019962">SR_OP_MOVED</a> the meaning of new_value and old value argument is as follows - the value pointed by new_value was moved after the old_value. If the old value is NULL it was moved to the first position. The same applies for operation <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39a438eb930f4ca04223c1e1e5ea6188de6">SR_OP_CREATED</a> if the created instance was a user-ordered (leaf-)list.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Implicit session provided in the callbacks (<a class="el" href="group__change__subs__api.html#gaf0db09fa67680ded78f46a7518dca47c" title="Callback to be called on the event of changing datastore content of the specified module...">sr_module_change_cb</a>). Will not work with other sessions. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">iter</td><td>Iterator acquired with <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">operation</td><td>Type of the operation made on the returned item. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">old_value</td><td>Old value of the item (the value before the change). NULL in case that the item has been just created (operation <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39a438eb930f4ca04223c1e1e5ea6188de6">SR_OP_CREATED</a>). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">new_value</td><td>New (modified) value of the the item. NULL in case that the item has been just deleted (operation <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39af4206240b7e15796a672caa00ef7b9ee">SR_OP_DELETED</a>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success, <a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a30eb28ebd33593f0ade9f3fdf2a0f9b4">SR_ERR_NOT_FOUND</a> on no more changes). </dd></dl>

</div>
</div>
<a id="gaa80d8ca05c67eba9d794b129422e8294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa80d8ca05c67eba9d794b129422e8294">&#9670;&nbsp;</a></span>sr_get_change_tree_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_get_change_tree_next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> *&#160;</td>
          <td class="paramname"><em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#ga817cb8999bcd27d073edec55b7228a4f">sr_change_oper_t</a> *&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct lyd_node **&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>prev_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>prev_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>prev_dflt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the next change from the provided iterator created by <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call. Data are represented as <em>libyang</em> subtrees. </p>
<dl class="section note"><dt>Note</dt><dd>Meaning of output parameters varies based on the operation: <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39a438eb930f4ca04223c1e1e5ea6188de6">SR_OP_CREATED</a> - <code>node</code> is the created node, for user-ordered lists either <code>prev_value</code> or <code>prev_list</code> is always set with meaning similar to <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39acae67fe0c948b028d3fe072551019962">SR_OP_MOVED</a>. <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39ad5d70b8f7c44d9e888b5ac252f954b5a">SR_OP_MODIFIED</a> - <code>node</code> is the modified node, <code>prev_value</code> is set to the previous value of the leaf, <code>prev_dflt</code> is set if the previous leaf value was the default. <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39af4206240b7e15796a672caa00ef7b9ee">SR_OP_DELETED</a> - <code>node</code> is the deleted node. <a class="el" href="group__change__subs__api.html#ggaf5478f6a39eb800cb9599d5f413e2e39acae67fe0c948b028d3fe072551019962">SR_OP_MOVED</a> - <code>node</code> is the moved (leaf-)list instance, for user-ordered lists either <code>prev_value</code> (leaf-list) or <code>prev_list</code> (list) is set to the preceding instance unless the node is the first, when they are set to "" (empty string).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Implicit session provided in the callbacks (<a class="el" href="group__change__subs__api.html#gaf0db09fa67680ded78f46a7518dca47c" title="Callback to be called on the event of changing datastore content of the specified module...">sr_module_change_cb</a>). Will not work with other sessions. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">iter</td><td>Iterator acquired with <a class="el" href="group__change__subs__api.html#ga613064e7a7431a30eff2b99b87af5348" title="Create an iterator for retrieving the changes (list of newly added / removed / modified nodes) in mod...">sr_get_changes_iter</a> call. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">operation</td><td>Type of the operation made on the returned item. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">node</td><td>Affected data node always with all parents, depends on the operation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">prev_value</td><td>Previous value, depends on the operation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">prev_list</td><td>Previous list keys predicate (<code>[key1="val1"][key2="val2"]...</code>), depends on the operation. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">prev_dflt</td><td>Previous value default flag, depends on the operation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success, <a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a30eb28ebd33593f0ade9f3fdf2a0f9b4">SR_ERR_NOT_FOUND</a> on no more changes). </dd></dl>

</div>
</div>
<a id="gaf76435b403512f619089d4c951fd6627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf76435b403512f619089d4c951fd6627">&#9670;&nbsp;</a></span>sr_free_change_iter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sr_free_change_iter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a">sr_change_iter_t</a> *&#160;</td>
          <td class="paramname"><em>iter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees <a class="el" href="group__change__subs__api.html#gab8ddf64064f8bc497d1435668359a45a" title="Iterator used for retrieval of a changeset using sr_get_changes_iter call. ">sr_change_iter_t</a> iterator and all memory allocated within it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iter</td><td>Iterator to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 24 2020 18:12:43 for sysrepo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
