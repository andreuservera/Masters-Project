<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sysrepo: Subscription API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sysrepo
   &#160;<span id="projectnumber">1.4.70</span>
   </div>
   <div id="projectbrief">YANG datastore</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__subs__api.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Subscription API</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gae2a6ae984bc100ab79a9730c3bef3ca0"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="group__subs__api.html#gac91898627ad5aeb589e6a3993a697d14">sr_subscr_flag_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subs__api.html#gae2a6ae984bc100ab79a9730c3bef3ca0">sr_subscr_flag_t</a></td></tr>
<tr class="memdesc:gae2a6ae984bc100ab79a9730c3bef3ca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags used to override default handling of subscriptions.  <a href="#gae2a6ae984bc100ab79a9730c3bef3ca0">More...</a><br /></td></tr>
<tr class="separator:gae2a6ae984bc100ab79a9730c3bef3ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9382eb7f93c3610b9b701d46c61a166"><td class="memItemLeft" align="right" valign="top">typedef struct sr_subscription_ctx_s&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a></td></tr>
<tr class="memdesc:gab9382eb7f93c3610b9b701d46c61a166"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sysrepo subscription context returned from sr_*_subscribe calls, it is supposed to be released by the caller using <a class="el" href="group__subs__api.html#ga8fe49b0cf74d5744cae2aa47d13d480b" title="Unsubscribes from a subscription acquired by any of sr_*_subscribe calls and releases all subscriptio...">sr_unsubscribe</a> call.  <a href="#gab9382eb7f93c3610b9b701d46c61a166">More...</a><br /></td></tr>
<tr class="separator:gab9382eb7f93c3610b9b701d46c61a166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa041e80af5ead759b0ba710e116d145"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subs__api.html#gaaa041e80af5ead759b0ba710e116d145">sr_subscr_options_t</a></td></tr>
<tr class="memdesc:gaaa041e80af5ead759b0ba710e116d145"><td class="mdescLeft">&#160;</td><td class="mdescRight">Options overriding default behavior of subscriptions, it is supposed to be a bitwise OR-ed value of any <a class="el" href="group__subs__api.html#gae2a6ae984bc100ab79a9730c3bef3ca0" title="Flags used to override default handling of subscriptions. ">sr_subscr_flag_t</a> flags.  <a href="#gaaa041e80af5ead759b0ba710e116d145">More...</a><br /></td></tr>
<tr class="separator:gaaa041e80af5ead759b0ba710e116d145"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gac91898627ad5aeb589e6a3993a697d14"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subs__api.html#gac91898627ad5aeb589e6a3993a697d14">sr_subscr_flag_e</a> { <br />
&#160;&#160;<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a712dcc46c75b1fc61831767f27895ac9">SR_SUBSCR_DEFAULT</a> = 0, 
<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a08c075b76b8299ea4b4ed0fbbcb5b9ae">SR_SUBSCR_CTX_REUSE</a> = 1, 
<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a950de919456aa8d277b9dd6d465ad2e0">SR_SUBSCR_NO_THREAD</a> = 2, 
<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a1e876a752ef82b3a73fd2b62aabead6f">SR_SUBSCR_PASSIVE</a> = 4, 
<br />
&#160;&#160;<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a0530a7715e162ee90e298ce504239444">SR_SUBSCR_DONE_ONLY</a> = 8, 
<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14ac5b782dfbbfe74c8ff2b1642a8bb0afe">SR_SUBSCR_ENABLED</a> = 16, 
<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a74ba05dc2b3b4cbcabb76a960fcf277a">SR_SUBSCR_UPDATE</a> = 32, 
<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a1d21dad1b10035bffcd901668afda9a4">SR_SUBSCR_UNLOCKED</a> = 64, 
<br />
&#160;&#160;<a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14ad8c77539582e1de78f57e256299ea138">SR_SUBSCR_OPER_MERGE</a> = 128
<br />
 }<tr class="memdesc:gac91898627ad5aeb589e6a3993a697d14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags used to override default handling of subscriptions.  <a href="group__subs__api.html#gac91898627ad5aeb589e6a3993a697d14">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gac91898627ad5aeb589e6a3993a697d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae87f7a55b60c13c69d813121778fd1a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subs__api.html#gae87f7a55b60c13c69d813121778fd1a1">sr_get_event_pipe</a> (<a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> *subscription, int *event_pipe)</td></tr>
<tr class="memdesc:gae87f7a55b60c13c69d813121778fd1a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the event pipe of a subscription. Do not call unless <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a950de919456aa8d277b9dd6d465ad2e0" title="There will be no thread created for handling this subscription meaning no event will be processed! Us...">SR_SUBSCR_NO_THREAD</a> flag was used when subscribing! Event pipe can be used in <code>select()</code>, <code>poll()</code>, or similar functions to listen for new events. It will then be ready for reading.  <a href="#gae87f7a55b60c13c69d813121778fd1a1">More...</a><br /></td></tr>
<tr class="separator:gae87f7a55b60c13c69d813121778fd1a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4dd747c8bc2b3faadcd3ff8047fa26a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subs__api.html#gac4dd747c8bc2b3faadcd3ff8047fa26a">sr_process_events</a> (<a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> *subscription, <a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, time_t *stop_time_in)</td></tr>
<tr class="memdesc:gac4dd747c8bc2b3faadcd3ff8047fa26a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process any pending new events on a subscription. Should not be called unless <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a950de919456aa8d277b9dd6d465ad2e0" title="There will be no thread created for handling this subscription meaning no event will be processed! Us...">SR_SUBSCR_NO_THREAD</a> flag was used when subscribing! Usually called after this subscription's event pipe is ready for reading but can also be called periodically.  <a href="#gac4dd747c8bc2b3faadcd3ff8047fa26a">More...</a><br /></td></tr>
<tr class="separator:gac4dd747c8bc2b3faadcd3ff8047fa26a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8fe49b0cf74d5744cae2aa47d13d480b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__subs__api.html#ga8fe49b0cf74d5744cae2aa47d13d480b">sr_unsubscribe</a> (<a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> *subscription)</td></tr>
<tr class="memdesc:ga8fe49b0cf74d5744cae2aa47d13d480b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribes from a subscription acquired by any of sr_*_subscribe calls and releases all subscription-related data.  <a href="#ga8fe49b0cf74d5744cae2aa47d13d480b">More...</a><br /></td></tr>
<tr class="separator:ga8fe49b0cf74d5744cae2aa47d13d480b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gae2a6ae984bc100ab79a9730c3bef3ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2a6ae984bc100ab79a9730c3bef3ca0">&#9670;&nbsp;</a></span>sr_subscr_flag_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="group__subs__api.html#gac91898627ad5aeb589e6a3993a697d14">sr_subscr_flag_e</a>  <a class="el" href="group__subs__api.html#gae2a6ae984bc100ab79a9730c3bef3ca0">sr_subscr_flag_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags used to override default handling of subscriptions. </p>

</div>
</div>
<a id="gab9382eb7f93c3610b9b701d46c61a166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9382eb7f93c3610b9b701d46c61a166">&#9670;&nbsp;</a></span>sr_subscription_ctx_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct sr_subscription_ctx_s <a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sysrepo subscription context returned from sr_*_subscribe calls, it is supposed to be released by the caller using <a class="el" href="group__subs__api.html#ga8fe49b0cf74d5744cae2aa47d13d480b" title="Unsubscribes from a subscription acquired by any of sr_*_subscribe calls and releases all subscriptio...">sr_unsubscribe</a> call. </p>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01200">1200</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<a id="gaaa041e80af5ead759b0ba710e116d145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa041e80af5ead759b0ba710e116d145">&#9670;&nbsp;</a></span>sr_subscr_options_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="group__subs__api.html#gaaa041e80af5ead759b0ba710e116d145">sr_subscr_options_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Options overriding default behavior of subscriptions, it is supposed to be a bitwise OR-ed value of any <a class="el" href="group__subs__api.html#gae2a6ae984bc100ab79a9730c3bef3ca0" title="Flags used to override default handling of subscriptions. ">sr_subscr_flag_t</a> flags. </p>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01206">1206</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gac91898627ad5aeb589e6a3993a697d14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac91898627ad5aeb589e6a3993a697d14">&#9670;&nbsp;</a></span>sr_subscr_flag_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__subs__api.html#gac91898627ad5aeb589e6a3993a697d14">sr_subscr_flag_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags used to override default handling of subscriptions. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14a712dcc46c75b1fc61831767f27895ac9"></a>SR_SUBSCR_DEFAULT&#160;</td><td class="fielddoc"><p>Default behavior of the subscription. In case of <a class="el" href="group__change__subs__api.html#ga9fc19731882299fe1864ccc20b9bd842" title="Subscribe for changes made in the specified module. If there are changes made in several modules...">sr_module_change_subscribe</a> call it means that: </p>
<ul>
<li>for every new subscription (flag <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a08c075b76b8299ea4b4ed0fbbcb5b9ae" title="This option enables the application to re-use an already existing subscription context previously ret...">SR_SUBSCR_CTX_REUSE</a> not used) a thread is created that listens for new events (can be changed with <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a950de919456aa8d277b9dd6d465ad2e0" title="There will be no thread created for handling this subscription meaning no event will be processed! Us...">SR_SUBSCR_NO_THREAD</a> flag),</li>
<li>the subscriber is the "owner" of the subscribed data tree and it will appear in the operational datastore while this subscription is alive (if not already, can be changed using <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a1e876a752ef82b3a73fd2b62aabead6f" title="The subscriber is not the &quot;owner&quot; of the subscribed data tree, just a passive watcher for changes...">SR_SUBSCR_PASSIVE</a> flag),</li>
<li>the callback will be called twice, once with <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a> event and once with <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a> / <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a> event passed in (can be changed with <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a0530a7715e162ee90e298ce504239444" title="The subscriber does not support verification of the changes and wants to be notified only after the c...">SR_SUBSCR_DONE_ONLY</a> flag). </li>
</ul>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14a08c075b76b8299ea4b4ed0fbbcb5b9ae"></a>SR_SUBSCR_CTX_REUSE&#160;</td><td class="fielddoc"><p>This option enables the application to re-use an already existing subscription context previously returned from any sr_*_subscribe call instead of requesting the creation of a new one. In that case a single <a class="el" href="group__subs__api.html#ga8fe49b0cf74d5744cae2aa47d13d480b" title="Unsubscribes from a subscription acquired by any of sr_*_subscribe calls and releases all subscriptio...">sr_unsubscribe</a> call unsubscribes from all subscriptions filed within the context. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14a950de919456aa8d277b9dd6d465ad2e0"></a>SR_SUBSCR_NO_THREAD&#160;</td><td class="fielddoc"><p>There will be no thread created for handling this subscription meaning no event will be processed! Use this flag when the application has its own event loop and it will listen for and process events manually (see <a class="el" href="group__subs__api.html#gae87f7a55b60c13c69d813121778fd1a1" title="Get the event pipe of a subscription. Do not call unless SR_SUBSCR_NO_THREAD flag was used when subsc...">sr_get_event_pipe</a> and <a class="el" href="group__subs__api.html#gac4dd747c8bc2b3faadcd3ff8047fa26a" title="Process any pending new events on a subscription. Should not be called unless SR_SUBSCR_NO_THREAD fla...">sr_process_events</a>). </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14a1e876a752ef82b3a73fd2b62aabead6f"></a>SR_SUBSCR_PASSIVE&#160;</td><td class="fielddoc"><p>The subscriber is not the "owner" of the subscribed data tree, just a passive watcher for changes. When this option is passed in to <a class="el" href="group__change__subs__api.html#ga9fc19731882299fe1864ccc20b9bd842" title="Subscribe for changes made in the specified module. If there are changes made in several modules...">sr_module_change_subscribe</a>, the subscription will have no effect on the presence of the subtree in the operational datastore. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14a0530a7715e162ee90e298ce504239444"></a>SR_SUBSCR_DONE_ONLY&#160;</td><td class="fielddoc"><p>The subscriber does not support verification of the changes and wants to be notified only after the changes has been applied in the datastore, without the possibility to deny them (it will not receive <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa63b8e44bfee97cbecc06c44ff33522d5">SR_EV_CHANGE</a> nor <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa6a7bc850ab09aeb7385a0e10f2391d3f">SR_EV_ABORT</a> but only <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a> events). </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14ac5b782dfbbfe74c8ff2b1642a8bb0afe"></a>SR_SUBSCR_ENABLED&#160;</td><td class="fielddoc"><p>The subscriber wants to be notified about the current configuration at the moment of subscribing. It will receive <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa11b3249384640ee1795f861657a952fb">SR_EV_ENABLED</a> event, whose applying can fail causing the whole subscription to fail. On success this event will be followed by <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa52e97346d4bf27ab64ad9233627ccf39">SR_EV_DONE</a>. Be careful, <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa11b3249384640ee1795f861657a952fb">SR_EV_ENABLED</a> will be triggered even if there are no data so there will not be any changes! </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14a74ba05dc2b3b4cbcabb76a960fcf277a"></a>SR_SUBSCR_UPDATE&#160;</td><td class="fielddoc"><p>The subscriber will be called before any other subscribers for the particular module with an additional <a class="el" href="group__change__subs__api.html#ggaf5289764c79d867bab642997c23b355aa2d97580f720e0fac84cf422d4ca8287d">SR_EV_UPDATE</a> event and is then allowed to modify the new module data. It can add new changes by calling standard set functions (such as <a class="el" href="group__edit__data__api.html#ga08f01524a0a840c30c2395ab40755fc4" title="Prepare to set (create) the value of a leaf, leaf-list, list, or presence container. These changes are applied only after calling sr_apply_changes. Data are represented as pairs of a path and string value. ">sr_set_item_str</a>) on the implicit callback session and returning. Note that you cannot subscribe more callbacks with this flags on one module with the same priority. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14a1d21dad1b10035bffcd901668afda9a4"></a>SR_SUBSCR_UNLOCKED&#160;</td><td class="fielddoc"><p>The subscriber wants to modify other subscriptions in its callback. Normally, this would cause deadlock but with this flag it is possible. But, there are some <b>limitations</b>. The callback MUST not subscribe to the same RPC/module DS changes it is processing (would change subscription count and cause invalid memory access) and MUST not subscribe on the same <a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166" title="Sysrepo subscription context returned from sr_*_subscribe calls, it is supposed to be released by the...">sr_subscription_ctx_t</a> <code>subscription</code> (would cause a deadlock). Accepted <b>only</b> for RPC/action and change subscriptions, it makes no sense for others. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac91898627ad5aeb589e6a3993a697d14ad8c77539582e1de78f57e256299ea138"></a>SR_SUBSCR_OPER_MERGE&#160;</td><td class="fielddoc"><p>Instead of removing any previous existing matching data before getting them from an operational subscription callback, keep them. Then the returned data are merged into the existing data. Accepted only for operational subscriptions. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01120">1120</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gae87f7a55b60c13c69d813121778fd1a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae87f7a55b60c13c69d813121778fd1a1">&#9670;&nbsp;</a></span>sr_get_event_pipe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_get_event_pipe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>event_pipe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the event pipe of a subscription. Do not call unless <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a950de919456aa8d277b9dd6d465ad2e0" title="There will be no thread created for handling this subscription meaning no event will be processed! Us...">SR_SUBSCR_NO_THREAD</a> flag was used when subscribing! Event pipe can be used in <code>select()</code>, <code>poll()</code>, or similar functions to listen for new events. It will then be ready for reading. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>Subscription without a listening thread. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">event_pipe</td><td>Event pipe of the subscription, do not close! It will be closed when the subscription is unsubscribed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

</div>
</div>
<a id="gac4dd747c8bc2b3faadcd3ff8047fa26a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4dd747c8bc2b3faadcd3ff8047fa26a">&#9670;&nbsp;</a></span>sr_process_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_process_events </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&#160;</td>
          <td class="paramname"><em>stop_time_in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process any pending new events on a subscription. Should not be called unless <a class="el" href="group__subs__api.html#ggac91898627ad5aeb589e6a3993a697d14a950de919456aa8d277b9dd6d465ad2e0" title="There will be no thread created for handling this subscription meaning no event will be processed! Us...">SR_SUBSCR_NO_THREAD</a> flag was used when subscribing! Usually called after this subscription's event pipe is ready for reading but can also be called periodically. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>Subscription without a listening thread with some new events. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Optional session for storing errors. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stop_time_in</td><td>Optional seconds until the nearest notification subscription stop time is elapsed and this function should be called. If there are no subscriptions with stop time in future, it is set to 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

</div>
</div>
<a id="ga8fe49b0cf74d5744cae2aa47d13d480b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8fe49b0cf74d5744cae2aa47d13d480b">&#9670;&nbsp;</a></span>sr_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_unsubscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribes from a subscription acquired by any of sr_*_subscribe calls and releases all subscription-related data. </p>
<p>In case that the same subscription context was used to subscribe for multiple subscriptions, unsubscribes from all of them.</p>
<dl class="section note"><dt>Note</dt><dd>Subscription will no longer work even on error.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription</td><td>Subscription context acquired by any of sr_*_subscribe calls. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 24 2020 18:12:43 for sysrepo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
