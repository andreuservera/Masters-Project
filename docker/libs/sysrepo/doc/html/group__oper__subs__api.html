<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sysrepo: Operational Data Subscription API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sysrepo
   &#160;<span id="projectnumber">1.4.70</span>
   </div>
   <div id="projectbrief">YANG datastore</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__oper__subs__api.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Operational Data Subscription API</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga6baa2bd56bd6cebb605c547d80863e78"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oper__subs__api.html#ga6baa2bd56bd6cebb605c547d80863e78">sr_oper_get_items_cb</a>) (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *module_name, const char *path, const char *request_xpath, uint32_t request_id, struct lyd_node **parent, void *private_data)</td></tr>
<tr class="memdesc:ga6baa2bd56bd6cebb605c547d80863e78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to be called when operational data at the selected xpath are requested. Data are represented as <em>libyang</em> subtrees.  <a href="#ga6baa2bd56bd6cebb605c547d80863e78">More...</a><br /></td></tr>
<tr class="separator:ga6baa2bd56bd6cebb605c547d80863e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2915a5b53a6495ca246c44f7aae58ed5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__oper__subs__api.html#ga2915a5b53a6495ca246c44f7aae58ed5">sr_oper_get_items_subscribe</a> (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *module_name, const char *path, <a class="el" href="group__oper__subs__api.html#ga6baa2bd56bd6cebb605c547d80863e78">sr_oper_get_items_cb</a> callback, void *private_data, <a class="el" href="group__subs__api.html#gaaa041e80af5ead759b0ba710e116d145">sr_subscr_options_t</a> opts, <a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> **subscription)</td></tr>
<tr class="memdesc:ga2915a5b53a6495ca246c44f7aae58ed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register for providing operational data at the given xpath.  <a href="#ga2915a5b53a6495ca246c44f7aae58ed5">More...</a><br /></td></tr>
<tr class="separator:ga2915a5b53a6495ca246c44f7aae58ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga6baa2bd56bd6cebb605c547d80863e78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6baa2bd56bd6cebb605c547d80863e78">&#9670;&nbsp;</a></span>sr_oper_get_items_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* sr_oper_get_items_cb) (<a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *session, const char *module_name, const char *path, const char *request_xpath, uint32_t request_id, struct lyd_node **parent, void *private_data)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback to be called when operational data at the selected xpath are requested. Data are represented as <em>libyang</em> subtrees. </p>
<p>When the callback is called, the data parent is provided. Any parent children (selected by <code>path</code>) are removed and should be provided by the callback instead, if they exist. Callback handler can provide any data matching the <code>path</code> but in case there are other nested subscriptions, they will be called after this one (and when they are called, their parent children will again be removed which can result in nodes provided by the original callback being lost).</p>
<dl class="section note"><dt>Note</dt><dd>Callback is allowed to modify installed YANG modules but MUST not modify subscriptions. It would result in a deadlock and this callback timeout.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Implicit session (do not stop) with information about the event originator session IDs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">module_name</td><td>Name of the affected module. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td><a class="el" href="index.html#paths">Path</a> identifying the subtree that is supposed to be provided, same as the one used for the subscription. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request_xpath</td><td><a class="el" href="index.html#paths">XPath</a> as requested by a client. Can be NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request_id</td><td>Request ID unique for the specific <code>module_name</code>. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">parent</td><td>Pointer to an existing parent of the requested nodes. Is NULL for top-level nodes. Caller is supposed to append the requested nodes to this data subtree and return either the original parent or a top-level node. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">private_data</td><td>Private context opaque to sysrepo, as passed to <a class="el" href="group__oper__subs__api.html#ga2915a5b53a6495ca246c44f7aae58ed5" title="Register for providing operational data at the given xpath. ">sr_oper_get_items_subscribe</a> call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>User error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

<p class="definition">Definition at line <a class="el" href="sysrepo_8h_source.html#l01726">1726</a> of file <a class="el" href="sysrepo_8h_source.html">sysrepo.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2915a5b53a6495ca246c44f7aae58ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2915a5b53a6495ca246c44f7aae58ed5">&#9670;&nbsp;</a></span>sr_oper_get_items_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sr_oper_get_items_subscribe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__conn__sess__api.html#ga0de3599f66e9100f930f60a0ab00c60c">sr_session_ctx_t</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__oper__subs__api.html#ga6baa2bd56bd6cebb605c547d80863e78">sr_oper_get_items_cb</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>private_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__subs__api.html#gaaa041e80af5ead759b0ba710e116d145">sr_subscr_options_t</a>&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__subs__api.html#gab9382eb7f93c3610b9b701d46c61a166">sr_subscription_ctx_t</a> **&#160;</td>
          <td class="paramname"><em>subscription</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register for providing operational data at the given xpath. </p>
<p>Required WRITE access.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">session</td><td>Session (not <a class="el" href="group__conn__sess__api.html#gabc202a7ba344c0e2d4c8cb0738f8d026">DS</a>-specific) to use. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">module_name</td><td>Name of the affected module. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td><a class="el" href="index.html#paths">Path</a> identifying the subtree which the provider is able to provide. Predicates can be used to provide only specific instances of nodes. Before calling this callback, any existing data matching this path <b>are deleted</b>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>Callback to be called when the operational data for the given xpath are requested. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">private_data</td><td>Private context passed to the callback function, opaque to sysrepo. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opts</td><td>Options overriding default behavior of the subscription, it is supposed to be a bitwise OR-ed value of any <a class="el" href="group__subs__api.html#gae2a6ae984bc100ab79a9730c3bef3ca0" title="Flags used to override default handling of subscriptions. ">sr_subscr_flag_t</a> flags. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">subscription</td><td>Subscription context that is supposed to be released by <a class="el" href="group__subs__api.html#ga8fe49b0cf74d5744cae2aa47d13d480b" title="Unsubscribes from a subscription acquired by any of sr_*_subscribe calls and releases all subscriptio...">sr_unsubscribe</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (<a class="el" href="group__log__api.html#ggadd7fb6a70e891db878df8f8e3cf41d39a9349114b18324f7d763650d2cd577df3">SR_ERR_OK</a> on success). </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 24 2020 18:12:43 for sysrepo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
